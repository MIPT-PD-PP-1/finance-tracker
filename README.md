# üí∏ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω—ã–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Ö–æ–¥—ã –∏ —Ä–∞—Å—Ö–æ–¥—ã –∏ –ø–æ–ª—É—á–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –Ω–∏–º. üìä

## ‚ú® –§—É–Ω–∫—Ü–∏–∏

- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π;
- üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –ø–µ—Ä–∏–æ–¥–∞–º;
- ü•ß –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö;
- üßπ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –¥–∞—Ç–µ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º;
- üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ `.csv` –∏ `.xlsx`;
- ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üåê API

#### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

| –≠–Ω–¥–ø–æ–∏–Ω—Ç               | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ                    | –ü—É—Ç—å                      |
| ---------------------- | ----- | --------------------------- | ------------------------- |
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è            | POST  | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | /api/auth/register        |
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è            | POST  | –í—Ö–æ–¥ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤    | /api/auth/login           |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  | GET   | –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è       | /api/auth/me              |
| –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è           | PUT   | –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è                | /api/auth/change-password |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞      | POST  | –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω–∞             | /api/auth/refresh-token   |

#### üë• –ì—Ä—É–ø–ø—ã

| –≠–Ω–¥–ø–æ–∏–Ω—Ç               | –ú–µ—Ç–æ–¥  | –û–ø–∏—Å–∞–Ω–∏–µ                       | –ü—É—Ç—å                                   |
| ---------------------- | ------ | ------------------------------ | -------------------------------------- |
| –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫        | GET    | –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è      | /api/groups                            |
| –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É         | POST   | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É           | /api/groups                            |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É   | PUT    | –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã         | /api/groups/{group_id}                 |
| –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É         | DELETE | –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É                 | /api/groups/{group_id}                 |
| –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≥—Ä—É–ø–ø—É      | GET    | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã       | /api/groups/{group_id}                 |
| –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  | POST   | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É | /api/groups/{group_id}/users/{user_id} |
| –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è   | DELETE | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≥—Ä—É–ø–ø—ã | /api/groups/{group_id}/users/{user_id} |
| –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π   | GET    | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥—Ä—É–ø–ø—ã    | /api/groups/{group_id}/users           |
| –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É     | GET    | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Ä–∞—Å—Ö–æ–¥–∞–º –≤ –≥—Ä—É–ø–ø–µ | /api/groups/{id}/analytics             |

#### üíº –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

| –≠–Ω–¥–ø–æ–∏–Ω—Ç                 | –ú–µ—Ç–æ–¥  | –û–ø–∏—Å–∞–Ω–∏–µ                                   | –ü—É—Ç—å                   |
| ------------------------ | ------ | ------------------------------------------ | ---------------------- |
| –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫          | GET    | –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ | /api/transactions      |
| –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é       | POST   | –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥ –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥                  | /api/transactions      |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é | PUT    | –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                 | /api/transactions/{id} |
| –£–¥–∞–ª–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é       | DELETE | –£–¥–∞–ª–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é                         | /api/transactions/{id} |

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```mermaid
erDiagram
    USER {
        int id PK
        string first_name
        string last_name
        string login
        string password
    }

    GROUP {
        int id PK
        string name
        int owner_id FK
    }
    
    USER_GROUP_ASSOCIATION {
        int user_id FK
        int group_id FK
    }

    TRANSACTION {
        int id PK
        string name
        string type "income/expense"
        string category
        decimal amount
        date transaction_date
        int user_id FK
        int group_id FK
    }

    USER ||--o{ GROUP : "owns"
    USER ||--o{ USER_GROUP_ASSOCIATION : "participates"
    GROUP ||--o{ USER_GROUP_ASSOCIATION : "has_members"
    USER ||--o{ TRANSACTION : "creates"
    GROUP ||--o{ TRANSACTION : "contains"
```

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ –≤ Docker

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone git@github.com:MIPT-PD-PP-1/finance-tracker.git
cd finance-tracker
```

2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

3. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
docker compose up -d --build
```

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
docker compose ps
```

5. –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
docker compose down
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone git@github.com:MIPT-PD-PP-1/finance-tracker.git
cd finance-tracker
```

2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω `.env.local`.

3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
make run
```

4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞
- –ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: `make db-down`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫—Ä—ã—Ç –∞–≤—Ç–æ—Ç–µ—Å—Ç–∞–º–∏ –Ω–∞ **pytest**. –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã API: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –≥—Ä—É–ø–ø—ã –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conftest.py          # –§–∏–∫—Å—Ç—É—Ä—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
‚îú‚îÄ‚îÄ test_auth.py         # –¢–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (19 —Ç–µ—Å—Ç–æ–≤)
‚îú‚îÄ‚îÄ test_groups.py       # –¢–µ—Å—Ç—ã –≥—Ä—É–ø–ø (33 —Ç–µ—Å—Ç–∞)
‚îî‚îÄ‚îÄ test_transactions.py # –¢–µ—Å—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (40 —Ç–µ—Å—Ç–æ–≤)
```

**–í—Å–µ–≥–æ: 92 —Ç–µ—Å—Ç–∞**

### –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

| –ë–ª–æ–∫ | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|------|----------|
| üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, /me, —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è, refresh —Ç–æ–∫–µ–Ω–∞ |
| üë• –ì—Ä—É–ø–ø—ã | CRUD –≥—Ä—É–ø–ø, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| üíº –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ | CRUD —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –≥—Ä—É–ø–ø–∞–º |

–ö–∞–∂–¥—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞:
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (happy path)
- ‚ùå –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (422)
- üîí –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401/403)
- üîç –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã (404)
- üö´ –î–æ—Å—Ç—É–ø –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º (403)

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—á–µ—Ä–µ–∑ Make)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
make test
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü–æ–¥–Ω–∏–º–µ—Ç PostgreSQL –≤ Docker
2. –°–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤—É—é –ë–î `finance_tracker_test`
3. –ó–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã

#### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:
```bash
make db-up
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
```bash
docker exec -it $(docker compose ps -q db) psql -U postgres -c "CREATE DATABASE finance_tracker_test;"
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:
```bash
source venv/bin/activate
export TEST_DATABASE_URL="postgresql+asyncpg://postgres:postgres@localhost:5432/finance_tracker_test"
pytest tests/ -v
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã pytest

```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
pytest tests/test_auth.py -v

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Ç–µ—Å—Ç–æ–≤
pytest tests/test_groups.py::TestCreateGroup -v

# –ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest tests/test_auth.py::TestLogin::test_login_success -v

# –ó–∞–ø—É—Å–∫ —Å –≤—ã–≤–æ–¥–æ–º print()
pytest tests/ -v -s

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest tests/ -v -x

# –ü–æ–∫–∞–∑–∞—Ç—å —Å–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/ -v --durations=10
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `TEST_DATABASE_URL` | URL —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î PostgreSQL | `postgresql+asyncpg://postgres:postgres@localhost:5432/finance_tracker_test` |
| `SECRET_KEY` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–µ—Å—Ç—ã

1. **–ò–∑–æ–ª—è—Ü–∏—è**: –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —á–∏—Å—Ç–æ–π –ë–î ‚Äî —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º –∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ
2. **–§–∏–∫—Å—Ç—É—Ä—ã**: –í `conftest.py` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã:
   - `client` ‚Äî HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
   - `db_session` ‚Äî —Å–µ—Å—Å–∏—è –ë–î
   - `test_user`, `test_user2` ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - `auth_headers` ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å JWT-—Ç–æ–∫–µ–Ω–æ–º
   - `test_group` ‚Äî —Ç–µ—Å—Ç–æ–≤–∞—è –≥—Ä—É–ø–ø–∞
   - `test_transaction` ‚Äî —Ç–µ—Å—Ç–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
3. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –¢–µ—Å—Ç—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç `pytest-asyncio`

